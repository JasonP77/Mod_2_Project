<h1>Category: <%= @post.category.name %></h1>
<br>
<h2>Title: <%=@post.title%></h2>

<h3>Posted By: <%= @post.user.username %></h3>
    <% if session[:user_id] == @post.user_id || current_user.admin%>
        <%= link_to edit_post_path(@post) do %>
            <button class="ui button"><i class="edit icon center">Edit</i></button>
        <% end %>
        <%= link_to post_path(@post), method: :delete do %>
            <button class="ui button"><i class="trash icon center">Delete</i></button>
        <% end %>
    <% end %>
<br>
<p>Question: <%=@post.content%></p>
<p><%= link_to "Respond to Post", new_comment_path(post: @post.id) %>


<h4>Comments</h4>
<% @post.comments.each do |comment| %>
    <% if comment.parent_id == nil %> <!-- If this comment is parent... prevents replies displaying themselves as parent comment -->
        <div id="container"><li><%=comment.user.username %>: <%= link_to new_comment_path(parent_id: comment.id, post: @post.id) do %>
            <button class="ui button"><i class="reply icon center">Reply</i></button>
        <% end %>
        <% if session[:user_id] == comment.user_id || current_user.admin %>
            <%= link_to edit_comment_path(comment) do %>
                <button class="ui button"><i class="edit icon center">Edit</i></button>
            <% end %>
            <%= link_to comment_path(comment), method: :delete do %>
                <button class="ui button"><i class="trash icon center">Delete</i></button>
            <% end %>
        <% end %>
        <br>
        <%=comment.content%>
        </li></div>
        <% if comment.replies %>
            <ul>
            <% comment.replies.each do |reply| %>
                <li>---<%=reply.user.username%>:
                <br>
                <%=reply.content%>
                <% if session[:user_id] == reply.user_id || current_user.admin%>
                <%= link_to edit_comment_path(reply) do %>
                    <button class="ui button"><i class="edit icon center">Edit</i></button>
                    <% end %>
                <%= link_to comment_path(reply), method: :delete do %>
                <button class="ui button"><i class="trash icon center">Delete</i></button>
            <% end %>
                 <% end %>
                </li>
                <br>
            <% end %>
            </ul>
        <% end %>
        <br>
    <% end %>
<% end %>
<br>
<br>
<br>
<%= link_to "Category Homepage", category_path(@post.category)%>
<br>
<%= link_to "Users Index", users_path %>